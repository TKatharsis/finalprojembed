(function(){"use strict";var t={261:function(t,e,a){var i={};a.r(i),a.d(i,{O:function(){return st}});var n=a(130),o=a(768);const s={id:"app"};function r(t,e,a,i,n,r){const l=(0,o.g2)("AppNavbar"),d=(0,o.g2)("router-view"),c=(0,o.g2)("AppFooter");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(l),(0,o.bF)(d),(0,o.bF)(c)])}const l={class:"navbar navbar-expand-lg navbar-dark bg-dark px-4"},d={class:"collapse navbar-collapse",id:"navbarNav"},c={class:"navbar-nav me-auto"},p={class:"nav-item"},h={class:"nav-item"},u={class:"d-flex align-items-center"};function g(t,e,a,i,n,s){const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",l,[e[5]||(e[5]=(0,o.Lk)("a",{class:"navbar-brand",href:"#"},"Admin Dashboard",-1)),e[6]||(e[6]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,o.Lk)("div",d,[(0,o.Lk)("ul",c,[(0,o.Lk)("li",p,[(0,o.bF)(r,{to:"/home",class:"nav-link"},{default:(0,o.k6)((()=>e[1]||(e[1]=[(0,o.eW)("Home")]))),_:1})]),(0,o.Lk)("li",h,[(0,o.bF)(r,{to:"/sensors",class:"nav-link"},{default:(0,o.k6)((()=>e[2]||(e[2]=[(0,o.eW)("Sensors")]))),_:1})])]),e[4]||(e[4]=(0,o.Lk)("div",{class:"d-flex align-items-center"},[(0,o.Lk)("button",{class:"btn btn-outline-light",type:"button"},[(0,o.Lk)("i",{class:"bi bi-person-circle me-1"}),(0,o.eW)(" John Doe ")])],-1)),(0,o.Lk)("div",u,[(0,o.Lk)("button",{class:"btn btn-outline-light ms-2",onClick:e[0]||(e[0]=(...t)=>s.logout&&s.logout(...t))},e[3]||(e[3]=[(0,o.Lk)("i",{class:"bi bi-box-arrow-right me-1"},null,-1),(0,o.eW)(" Logout ")]))])])])}var m={name:"AppNavbar",methods:{logout(){this.$router.push("/")}}},b=a(241);const y=(0,b.A)(m,[["render",g],["__scopeId","data-v-7e08ee20"]]);var f=y;const v={class:"footer bg-dark text-white text-center py-3"};function x(t,e,a,i,n,s){return(0,o.uX)(),(0,o.CE)("footer",v,e[0]||(e[0]=[(0,o.Lk)("small",null,"Â© 2024 Admin Dashboard. Welcome To CrabAlert's Pond Salinity Monitoring ",-1)]))}var k={name:"AppFooter"};const L=(0,b.A)(k,[["render",x]]);var S=L,w={name:"App",components:{AppNavbar:f,AppFooter:S}};const A=(0,b.A)(w,[["render",r],["__scopeId","data-v-28103bc0"]]);var T=A,C=a(393),D=a(387),E=a.p+"img/homepage.57fcf4d7.jpg";const M={class:"container mt-4"};function O(t,e,a,i,n,s){return(0,o.uX)(),(0,o.CE)("div",M,e[0]||(e[0]=[(0,o.Lk)("h2",{class:"mb-4"},"Welcome to CrabAlert",-1),(0,o.Lk)("div",{class:"mb-4"},[(0,o.Lk)("img",{src:E,alt:"CrabAlert Group",class:"img-fluid rounded"})],-1),(0,o.Lk)("h4",null,"About Us",-1),(0,o.Lk)("p",null," CrabAlert is a dedicated team focused on monitoring salinity levels in water bodies, ensuring the optimal environment for marine life. Our system uses real-time data to provide insights and alerts for salinity changes. ",-1),(0,o.Lk)("h4",null,"Salinity Monitoring Overview",-1),(0,o.Lk)("p",null," This platform offers real-time monitoring of salinity levels, ensuring water quality and providing critical data for environmental protection. Here, you can track salinity levels, see historical trends, and receive alerts based on predefined thresholds. ",-1)]))}const _=(0,C.nY)("sensorStore",{state:()=>({salinity:null,logs:[]}),actions:{updateSensorData({salinity:t}){null===t||void 0===t||isNaN(t)?console.error("Invalid salinity data:",t):(this.salinity=t,this.logs.push({time:(new Date).toLocaleTimeString(),salinity:t}),console.log("Updated salinity:",this.salinity))}},persist:!0});var j={name:"HomePage",computed:{totalReadings(){return _().totalReadings},currentSalinity(){return _().currentSalinity},alerts(){return _().alerts},historicalData(){return _().historicalData}}};const F=(0,b.A)(j,[["render",O]]);var X=F,Q=a(232);const I={style:{padding:"20px"}},N={key:0},$={key:1},P={style:{display:"flex","justify-content":"space-between",gap:"20px","margin-top":"20px"}},U={style:{flex:"1",border:"1px solid #ddd","border-radius":"8px",background:"#fff",padding:"20px","box-shadow":"0px 4px 6px rgba(0, 0, 0, 0.1)"}},H={style:{"text-align":"center","font-size":"24px"}},W={key:0,style:{"text-align":"center","font-size":"18px","margin-top":"10px"}},G={key:1,style:{"text-align":"center","font-size":"18px","margin-top":"10px"}},J={style:{"margin-top":"30px"}},R={style:{"margin-top":"20px"}},V={style:{background:"#f7f7f7","border-radius":"8px",padding:"10px"}},z={style:{padding:"10px","list-style":"none","font-size":"14px"}};function K(t,e,a,i,s,r){return(0,o.uX)(),(0,o.CE)("div",I,[e[9]||(e[9]=(0,o.Lk)("h1",null,"Salinity Monitoring System",-1)),"normal"!==s.salinityAlert?((0,o.uX)(),(0,o.CE)("div",{key:0,style:(0,Q.Tr)(r.alertStyle(s.salinityAlert)),class:"alert-banner"},["high"===s.salinityAlert?((0,o.uX)(),(0,o.CE)("span",N,"Warning: Salinity is too high!")):(0,o.Q3)("",!0),"low"===s.salinityAlert?((0,o.uX)(),(0,o.CE)("span",$,"Warning: Salinity is too low!")):(0,o.Q3)("",!0)],4)):(0,o.Q3)("",!0),(0,o.Lk)("div",P,[e[7]||(e[7]=(0,o.Fv)('<div style="flex:1;border:1px solid #ddd;border-radius:8px;background:#fff;padding:20px;box-shadow:0px 4px 6px rgba(0, 0, 0, 0.1);" data-v-be9e4dc8><h2 style="text-align:center;margin-bottom:20px;" data-v-be9e4dc8>Historical Data</h2><div id="historicalDataChart" style="width:100%;height:400px;" data-v-be9e4dc8></div></div><div style="flex:1;border:1px solid #ddd;border-radius:8px;background:#fff;padding:20px;box-shadow:0px 4px 6px rgba(0, 0, 0, 0.1);" data-v-be9e4dc8><h2 style="text-align:center;margin-bottom:20px;" data-v-be9e4dc8>Salinity Graph</h2><div id="salinityGraphChart" style="width:100%;height:400px;" data-v-be9e4dc8></div></div>',2)),(0,o.Lk)("div",U,[e[6]||(e[6]=(0,o.Lk)("h2",{style:{"text-align":"center","margin-bottom":"20px"}},"Salinity Alert System",-1)),(0,o.Lk)("div",H,[e[2]||(e[2]=(0,o.eW)(" Current Status: ")),(0,o.Lk)("span",null,(0,Q.v_)(s.salinityValue)+" ppt",1)]),"normal"!==s.salinityAlert?((0,o.uX)(),(0,o.CE)("div",W,[(0,o.Lk)("strong",null,"ALERT: "+(0,Q.v_)(s.alertMessage),1)])):(0,o.Q3)("",!0),"normal"===s.salinityAlert?((0,o.uX)(),(0,o.CE)("div",G,e[3]||(e[3]=[(0,o.Lk)("strong",null,"Salinity levels are normal.",-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",J,[e[4]||(e[4]=(0,o.Lk)("label",{for:"minThreshold",style:{"font-weight":"bold"}},"Min Threshold (ppt):",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>s.minThreshold=t),min:0,style:{padding:"5px","margin-left":"10px",width:"80px"}},null,512),[[n.Jo,s.minThreshold]]),e[5]||(e[5]=(0,o.Lk)("label",{for:"maxThreshold",style:{"font-weight":"bold","margin-left":"20px"}},"Max Threshold (ppt):",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>s.maxThreshold=t),min:0,style:{padding:"5px","margin-left":"10px",width:"80px"}},null,512),[[n.Jo,s.maxThreshold]])])])]),(0,o.Lk)("div",R,[e[8]||(e[8]=(0,o.Lk)("h3",null,"Logs",-1)),(0,o.Lk)("div",V,[(0,o.Lk)("ul",z,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.logs,((t,e)=>((0,o.uX)(),(0,o.CE)("li",{key:e,style:{"margin-bottom":"8px"}},(0,Q.v_)(t),1)))),128))])])])])}var q=a(474);let B=null;const Y=(t,e)=>{const a="wss://a861c4d8328545aa8e034dd66473b64a.s1.eu.hivemq.cloud:8884/mqtt",i="KingCrimson",n="Mikasa4321";console.log("Attempting to connect to MQTT broker..."),B=q.A.connect(a,{username:i,password:n,reconnectPeriod:3e3,keepalive:60,clean:!0}),B.on("connect",(()=>{console.log("Connected to MQTT broker."),B.subscribe("pond/salinity",(t=>{t?(console.error("Error subscribing to topic:",t),e&&e(t)):console.log("Successfully subscribed to 'pond/salinity' topic.")}))})),B.on("message",((e,a)=>{console.log(`Received message on topic: ${e}`);const i=a.toString();let n;try{n=JSON.parse(i)}catch(s){return void console.error("Error parsing message payload:",s)}const o=n["salinity (ppt)"];void 0!==o?(console.log(`Salinity data received: ${o} ppt`),t&&t({topic:e,salinity:o})):console.warn("Salinity data is undefined in the received message.")})),B.on("close",(()=>{console.log("MQTT connection closed.")})),B.on("error",(t=>{console.error("Error with MQTT client:",t),e&&e(t)}))},Z=(t,e)=>{B&&B.connected?(console.log(`Publishing message to topic ${t}:`,e),B.publish(t,e,(t=>{t&&console.error("Error publishing message:",t)}))):console.warn("MQTT client is not connected, cannot publish message.")};var tt={connectAndSubscribe:Y,publish:Z},et=a(671),at=a(400),it=a(161);const nt={apiKey:"AIzaSyBVOXerrmwsgc1gFsKP3963jYnAQKEZl-c",authDomain:"finalproj-salinity-iot.firebaseapp.com",databaseURL:"https://finalproj-salinity-iot-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"finalproj-salinity-iot",storageBucket:"finalproj-salinity-iot.firebasestorage.app",messagingSenderId:"883507373534",appId:"1:883507373534:web:f0599daf18e61a037ca94f"},ot=(0,at.Wp)(nt),st=(0,it.C3)(ot);var rt={data(){return{logs:[],salinityValue:0,salinityAlert:"normal",alertMessage:"Salinity levels are normal.",historicalData:[],realTimeData:[],timeStamps:[],minThreshold:11,maxThreshold:15}},computed:{temperatureAlert(){return _().checkTemperatureAlert},humidityAlert(){return _().checkHumidityAlert}},methods:{addLog(t){this.logs.push(t),this.logs.length>50&&this.logs.shift()},initializeCharts(){this.historicalDataChart=et.Ts(document.getElementById("historicalDataChart")),this.salinityGraphChart=et.Ts(document.getElementById("salinityGraphChart"));const t={xAxis:{type:"category",data:this.timeStamps},yAxis:{type:"value"},series:[{type:"line",smooth:!0,data:this.realTimeData}]};this.historicalDataChart.setOption({...t,series:[{...t.series[0],name:"Historical Salinity",color:"#36a2eb"}]}),this.salinityGraphChart.setOption({...t,series:[{...t.series[0],name:"Real-Time Salinity",color:"#ff6384"}]})},updateChart(t,e,a){const i=(new Date).toLocaleTimeString();this.timeStamps.push(i),this.realTimeData.push(Number(e)),t.setOption({xAxis:{data:this.timeStamps.slice(-20)},series:[{data:this.realTimeData.slice(-20)}]}),this.addLog(`${a}: ${e} at ${i}`)},updateSalinityGraph(t){this.updateChart(this.salinityGraphChart,t,"Salinity"),this.salinityValue=t,this.checkSalinityAlert(t)},checkSalinityAlert(t){t<this.minThreshold?(this.salinityAlert="low",this.alertMessage=`Salinity levels too low! (Below ${this.minThreshold} ppt)`):t>this.maxThreshold?(this.salinityAlert="high",this.alertMessage=`Salinity levels too high! (Above ${this.maxThreshold} ppt)`):(this.salinityAlert="normal",this.alertMessage="Salinity levels are normal.")},alertStyle(t){const e={high:{backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb"},low:{backgroundColor:"#fff3cd",color:"#856404",border:"1px solid #ffeeba"},normal:{display:"none"}};return e[t]||{display:"none"}},connectAndSubscribe(){this.addLog("Connecting to MQTT broker..."),tt.connectAndSubscribe((t=>{const{topic:e,salinity:a}=t;"pond/salinity"===e&&this.updateSalinityGraph(a)}),(t=>{this.addLog(`MQTT Error: ${t.message}`)}))},async fetchHistoricalData(){try{const t=(0,it.KR)(st,"sensorData"),e=await(0,it.Jt)(t),a=e.val();console.log("Raw Firebase Data:",JSON.stringify(a));const i=new Date,n=new Date(i.getFullYear(),i.getMonth(),1).getTime(),o=new Date(i.getFullYear(),i.getMonth()+1,0,23,59,59,999).getTime();console.log("Start of the month (timestamp):",n),console.log("End of the month (timestamp):",o),this.historicalData=[],this.timeStamps=[];for(const s in a){const t=new Date(a[s].timestamp).getTime();if(console.log("Data Timestamp:",t),t>=n&&t<=o){const e=a[s]["salinity (ppt)"];this.historicalData.push(e),this.timeStamps.push(new Date(t).toLocaleDateString())}}this.historicalDataChart.setOption({xAxis:{data:this.timeStamps},series:[{data:this.historicalData}]}),console.log("Processed Historical Data:",this.historicalData)}catch(t){console.error("Error fetching historical data:",t),this.addLog("Error fetching historical data.")}}},mounted(){this.connectAndSubscribe(),this.fetchHistoricalData(),this.initializeCharts()}};const lt=(0,b.A)(rt,[["render",K],["__scopeId","data-v-be9e4dc8"]]);var dt=lt;const ct={class:"login"},pt={key:0,class:"error"};function ht(t,e,a,i,s,r){return(0,o.uX)(),(0,o.CE)("div",ct,[e[4]||(e[4]=(0,o.Lk)("h2",null,"Login",-1)),(0,o.Lk)("form",{onSubmit:e[2]||(e[2]=(0,n.D$)(((...t)=>r.loginUser&&r.loginUser(...t)),["prevent"]))},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.username=t),type:"text",placeholder:"Username",required:""},null,512),[[n.Jo,s.username]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),type:"password",placeholder:"Password",required:""},null,512),[[n.Jo,s.password]]),e[3]||(e[3]=(0,o.Lk)("button",{type:"submit"},"Login",-1))],32),s.errorMessage?((0,o.uX)(),(0,o.CE)("div",pt,(0,Q.v_)(s.errorMessage),1)):(0,o.Q3)("",!0)])}var ut={data(){return{username:"",password:"",errorMessage:""}},methods:{async loginUser(){try{const t=(0,it.KR)(i.db,"accounts"),e=await(0,it.Jt)(t);if(e.exists()){const t=e.val();let a=!1;for(let e in t)if(t[e].username===this.username&&t[e].password===this.password){a=!0;break}a?this.$router.push("/dashboard"):this.errorMessage="Invalid username or password."}else this.errorMessage="No accounts found in the database."}catch(t){this.errorMessage=t.message}}}};const gt=(0,b.A)(ut,[["render",ht],["__scopeId","data-v-07e975c2"]]);var mt=gt;const bt=[{path:"/home",name:"Home",component:X},{path:"/sensors",name:"Sensors",component:dt},{path:"/login",name:"Login",component:mt},{path:"/",redirect:"/login"}],yt=(0,D.aE)({history:(0,D.LA)(),routes:bt});var ft=yt;a(773);const vt=(0,n.Ef)(T),xt=(0,C.Ey)();vt.use(xt),vt.use(ft),vt.mount("#app")}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,a),o.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,i,n,o){if(!i){var s=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],o=t[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(r=!1,o<s&&(s=o));if(r){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[i,n,o]}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,o,s=i[0],r=i[1],l=i[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var c=l(a)}for(e&&e(i);d<s.length;d++)o=s[d],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(c)},i=self["webpackChunkadmin_dashboard"]=self["webpackChunkadmin_dashboard"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(261)}));i=a.O(i)})();
//# sourceMappingURL=app.db4bb075.js.map